from dotenv import load_dotenv
import os

load_dotenv()

# Ambil semua API key dari environment variable
openai_keys = [
    os.getenv("OPENAI_API_KEY_1"),
    os.getenv("OPENAI_API_KEY_2"),
    os.getenv("OPENAI_API_KEY_3"),
]

# Filter key yang valid (tidak None dan tidak kosong)
openai_keys = [key for key in openai_keys if key]

# Index untuk key yang sedang aktif (inisialisasi ke -1 agar mulai dari 0)
current_key_index = -1

def get_openai_api_key():
    global current_key_index
    if not openai_keys:
        raise ValueError("Tidak ada API key OpenAI yang tersedia.")
    # Ganti index key secara bergantian (round-robin)
    current_key_index = (current_key_index + 1) % len(openai_keys)
    return openai_keys[current_key_index]



